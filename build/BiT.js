'use strict';class a{constructor(){this.C;this.v;this.w;this.a;this.b;this.m;this.o;this.f;this.i;this.H;this.A;this.B;this.D;this.c;this.lineHeight;this.u;this.s;this.color}};class h{constructor(){this.g=21;this.h=12;this.j=-1;this.F=this.l=0;this.G=.66;this.b=0;this.i=this.f=this.c=this.a=!1}};class k{constructor(){this.data=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,2,2,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,3,0,0,0,3,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,2,0,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1],[1,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,0,0,0,5,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,0,0,0,0,4,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]}get a(){return this.data}};class l{constructor(){this.s=this.s.bind(this);this.D=new a;this.a=new h;this.i=(new k).a;this.b=document.createElement("canvas");this.b.width=window.innerWidth;this.b.height=window.innerHeight;this.b.style.a="pixelated";this.b.addEventListener("touchend",()=>{this.m=!1;this.o=this.B=this.w=this.v=0;this.a.b=0;this.a.a=!1;this.a.c=!1});this.b.addEventListener("touchmove",b=>{this.m&&(this.B=-.1*(this.v-b.touches[0].clientX),this.o=this.w-b.touches[0].clientY,0!=this.o&&(this.a.a=!0))},{passive:!1});
this.b.addEventListener("touchstart",b=>{this.m=!0;this.v=b.touches[0].clientX;this.w=b.touches[0].clientY},{passive:!1});document.body.appendChild(this.b);this.b.addEventListener("click",()=>{this.b.requestPointerLock()});this.f=this.b.getContext("2d",{alpha:!1});this.f.lineWidth=1;this.u=this.C=0;this.m=!1;this.c=this.o=this.B=this.w=this.v=0;this.A=1;document.addEventListener("pointerlockchange",()=>{document.pointerLockElement==this.b?(console.log("The pointer lock status is now locked"),document.addEventListener("mousemove",
this.s,!1)):(console.log("The pointer lock status is now unlocked"),document.removeEventListener("mousemove",this.s,!1))},!1);document.addEventListener("keyup",b=>{switch(b.keyCode){case 87:this.a.a=!1;break;case 83:this.a.c=!1;break;case 65:this.a.f=!1;break;case 68:this.a.i=!1;break;case 16:this.A=1}},!1);document.addEventListener("keydown",b=>{switch(b.keyCode){case 87:this.a.a=!0;break;case 83:this.a.c=!0;break;case 65:this.a.f=!0;break;case 68:this.a.i=!0;break;case 16:this.A=2.5}},!1);document.getElementById("fullscreen").addEventListener("click",
()=>{this.b.requestFullscreen&&this.b.requestFullscreen()});window.addEventListener("resize",()=>{this.b.width=window.innerWidth;this.b.height=window.innerHeight})}s(b){this.a.b=b.movementX}};const m=new l;
function n(b){var c=(b-m.C)/1E3;m.c=3*c*m.A;if(1==m.m||m.a.b!=m.u){if(m.m){var e=m.B;m.c=m.o/1E3}else e=(m.u+m.a.b)/2;m.u=m.a.b;c=e*c*-.1;e=m.a.j;m.a.j=m.a.j*Math.cos(c)-m.a.l*Math.sin(c);m.a.l=e*Math.sin(c)+m.a.l*Math.cos(c);e=m.a.F;m.a.F=m.a.F*Math.cos(c)-m.a.G*Math.sin(c);m.a.G=e*Math.sin(c)+m.a.G*Math.cos(c)}m.a.a&&(0==m.i[Math.floor(m.a.g+m.a.j*m.c*15)][Math.floor(m.a.h)]&&(m.a.g+=m.a.j*m.c),0==m.i[Math.floor(m.a.g)][Math.floor(m.a.h+m.a.l*m.c*15)]&&(m.a.h+=m.a.l*m.c));m.a.i&&(c=(m.a.j*Math.cos(Math.PI/
2)-m.a.l*Math.sin(Math.PI/2))*m.c,0==m.i[Math.floor(m.a.g-15*c)][Math.floor(m.a.h)]&&(m.a.g-=c),c=(m.a.j*Math.sin(Math.PI/2)+m.a.l*Math.cos(Math.PI/2))*m.c,0==m.i[Math.floor(m.a.g)][Math.floor(m.a.h-15*c)]&&(m.a.h-=c));m.a.f&&(c=(m.a.j*Math.cos(-Math.PI/2)-m.a.l*Math.sin(-Math.PI/2))*m.c,0==m.i[Math.floor(m.a.g-15*c)][Math.floor(m.a.h)]&&(m.a.g-=c),c=(m.a.j*Math.sin(-Math.PI/2)+m.a.l*Math.cos(-Math.PI/2))*m.c,0==m.i[Math.floor(m.a.g)][Math.floor(m.a.h-15*c)]&&(m.a.h-=c));m.a.c&&(0==m.i[Math.floor(m.a.g-
m.a.j*m.c*15)][Math.floor(m.a.h)]&&(m.a.g-=m.a.j*m.c),0==m.i[Math.floor(m.a.g)][Math.floor(m.a.h-m.a.l*m.c*15)]&&(m.a.h-=m.a.l*m.c));m.C=b;m.f.fillStyle="#777777";m.f.fillRect(0,0,m.b.width,m.b.height/2);m.f.fillStyle="#bbbbbb";m.f.fillRect(0,m.b.height/2,m.b.width,m.b.height);for(c=0;c<m.b.width;c+=1){e=c;b=m.D;var g=m.i,d=m.a,f=m.b;b.D=0;b.C=2*e/f.width-1;b.v=d.j+d.F*b.C;b.w=d.l+d.G*b.C;b.a=Math.floor(d.g);b.b=Math.floor(d.h);b.m=Math.abs(1/b.v);b.o=Math.abs(1/b.w);0>b.v?(b.A=-1,b.f=(d.g-b.a)*b.m):
(b.A=1,b.f=(b.a+1-d.g)*b.m);0>b.w?(b.B=-1,b.i=(d.h-b.b)*b.o):(b.B=1,b.i=(b.b+1-d.h)*b.o);for(;0==b.D;)b.f<b.i?(b.f+=b.m,b.a+=b.A,b.c=0):(b.i+=b.o,b.b+=b.B,b.c=1),0<g[b.a][b.b]&&(b.D=1);b.H=0==b.c?(b.a-d.g+(1-b.A)/2)/b.v:(b.b-d.h+(1-b.B)/2)/b.w;b.lineHeight=Math.floor(f.height/b.H);b.u=Math.floor(-b.lineHeight/2+f.height/2);0>b.u&&(b.u=0);b.s=Math.floor(b.lineHeight/2+f.height/2);b.s>=f.height&&(b.s=f.height-1);switch(g[b.a][b.b]){case 1:b.color=0==b.c?"#880000":"#FF7777";break;case 2:b.color=0==b.c?
"#0000AA":"#0088FF";break;case 3:b.color=0==b.c?"#00CC55":"#AAFF66";break;case 4:b.color=0==b.c?"#664400":"#DD8855";break;case 5:b.color=0==b.c?"#333333":"#000000"}e=b.u;g=b.s;m.f.strokeStyle=b.color;m.f.beginPath();m.f.moveTo(c+.5,e);m.f.lineTo(c+.5,g);m.f.stroke()}window.requestAnimationFrame(n)}window.requestAnimationFrame(n);
